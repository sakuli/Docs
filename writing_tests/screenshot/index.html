<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    
    <script>(function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
          'gtm.start':
              new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
              'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', 'GTM-TMFSKHB');
    </script>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.56.3" />
    <meta name="description" content="">


    <link rel="icon" href="/docs/images/favicon.png" type="image/png">

    <title>Sakuli</title>

    
    <link href="/docs/css/nucleus.css" rel="stylesheet">
    <link href="/docs/css/fontawesome-all.min.css" rel="stylesheet">
    <link href="/docs/css/hybrid.css" rel="stylesheet">
    <link href="/docs/css/featherlight.min.css" rel="stylesheet">
    <link href="/docs/css/perfect-scrollbar.min.css" rel="stylesheet">
    <link href="/docs/css/auto-complete.css" rel="stylesheet">
    <link href="/docs/css/atom-one-dark-reasonable.css" rel="stylesheet">
    <link href="/docs/css/theme.css" rel="stylesheet">
    <link href="/docs/css/hugo-theme.css" rel="stylesheet">
    

    <script src="/docs/js/jquery-3.3.1.min.js"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="/docs/writing_tests/screenshot/">
    
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TMFSKHB" height="0" width="0"
      style="display:none;visibility:hidden"></iframe></noscript>
    
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">
  <img src="/docs/images/sakuli_01.svg" style="width: 250px; display: block; height: auto" />
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/docs/js/lunr.min.js"></script>
<script type="text/javascript" src="/docs/js/auto-complete.js"></script>
<script type="text/javascript">
    
        var baseurl = "\/docs";
    
</script>
<script type="text/javascript" src="/docs/js/search.js"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/docs/getting-started/" title="Getting Started" class="dd-item
        
        
        
        ">
      <a href="/docs/getting-started/">
          <i class='fas fa-chevron-right'></i>  Getting Started
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/docs/getting-started/prerequisites/" title="Prerequisites" class="dd-item ">
        <a href="/docs/getting-started/prerequisites/">
        Prerequisites
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/getting-started/initialization/" title="Initialization" class="dd-item ">
        <a href="/docs/getting-started/initialization/">
        Initialization
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/getting-started/installation/" title="Installation" class="dd-item ">
        <a href="/docs/getting-started/installation/">
        Installation
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/getting-started/firsttest/" title="First Setup" class="dd-item ">
        <a href="/docs/getting-started/firsttest/">
        First Setup
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs/writing_tests/" title="Writing Tests" class="dd-item
        parent
        
        
        ">
      <a href="/docs/writing_tests/">
          <i class='fas fa-chevron-right'></i>  Writing Tests
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/docs/writing_tests/anatomy/" title="Anatomy" class="dd-item ">
        <a href="/docs/writing_tests/anatomy/">
        Anatomy
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/writing_tests/interact/" title="Interact" class="dd-item ">
        <a href="/docs/writing_tests/interact/">
        Interact
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/writing_tests/screenshot/" title="Screenshot" class="dd-item active">
        <a href="/docs/writing_tests/screenshot/">
        Screenshot
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/writing_tests/webtests/" title="Webtests" class="dd-item ">
        <a href="/docs/writing_tests/webtests/">
        Webtests
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs/configuring_tests/" title="Configuring Tests" class="dd-item
        
        
        
        ">
      <a href="/docs/configuring_tests/">
          <i class='fas fa-chevron-right'></i>  Configuring Tests
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs/enterprise_features/" title="Enterprise Features" class="dd-item
        
        
        
        ">
      <a href="/docs/enterprise_features/">
          <i class='fas fa-chevron-right'></i>  Enterprise Features
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/docs/enterprise_features/icinga/" title="Icinga2 Forwarder" class="dd-item ">
        <a href="/docs/enterprise_features/icinga/">
        Icinga2 Forwarder
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/enterprise_features/check/" title="checkmk Fowarder" class="dd-item ">
        <a href="/docs/enterprise_features/check/">
        checkmk Fowarder
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/enterprise_features/omd/" title="OMD Forwarder" class="dd-item ">
        <a href="/docs/enterprise_features/omd/">
        OMD Forwarder
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/enterprise_features/e2e/" title="Container" class="dd-item ">
        <a href="/docs/enterprise_features/e2e/">
        Container
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/enterprise_features/s2i/" title="S2I Image" class="dd-item ">
        <a href="/docs/enterprise_features/s2i/">
        S2I Image
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs/cli/" title="CLI" class="dd-item
        
        
        
        ">
      <a href="/docs/cli/">
          <i class='fas fa-chevron-right'></i>  CLI
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs/cookbook/" title="Cookbook" class="dd-item
        
        
        
        ">
      <a href="/docs/cookbook/">
          <i class='fas fa-chevron-right'></i>  Cookbook
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/docs/cookbook/invalid-session-id/" title="Error: Invalid session id" class="dd-item ">
        <a href="/docs/cookbook/invalid-session-id/">
        Error: Invalid session id
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/cookbook/container/" title="Run Container" class="dd-item ">
        <a href="/docs/cookbook/container/">
        Run Container
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/cookbook/proxy/" title="Container and Proxies" class="dd-item ">
        <a href="/docs/cookbook/proxy/">
        Container and Proxies
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/cookbook/frames/" title="Frames" class="dd-item ">
        <a href="/docs/cookbook/frames/">
        Frames
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      


      
      <div id="apiHead" class="padding">API Docs</div>
      <ul id="apiMenu">
        <li><a href="/apidoc/sakuli-legacy" target="_blank" >@sakuli/legacy</a></li>
      </ul>

      

      <hr/>

      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt" ></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/docs/'></a> > <a href='/docs/writing_tests/'>Writing Tests</a> > Screenshot
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
        <nav id="TableOfContents">
<ul>
<li><a href="#screenshot-based-testing">Screenshot based Testing</a>
<ul>
<li><a href="#how-to-control-the-mouse-in-a-sakuli-test">How to Control the Mouse in a Sakuli Test</a>
<ul>
<li><a href="#moving-the-mouse-to-a-screenshot">Moving the mouse to a screenshot</a></li>
<li><a href="#moving-the-mouse-relative-to-current-position">Moving the mouse relative to current position</a></li>
<li><a href="#moving-the-mouse-to-an-absolute-position">Moving the Mouse to an Absolute Position</a></li>
<li><a href="#drag-and-drop">Drag And Drop</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            
          

        





<h1 id="screenshot-based-testing">Screenshot based Testing</h1>

<p>A lot of E2E scenarios exceed the capabilities of browsers and webdrivers. This might include common use-cases like a drag and drop from the host system to a webpage or exporting a report into a spreadsheet or PDF-format. In these cases, your web-based tests can be extended to also validate behavior and invoke interactions outside the browser, all within a single test.</p>

<p>Of course, you can also use Sakulis native testing power on its own, e.g. rich-client testing of SAP, office or proprietary software systems. Sakuli accomplishes its native capabilities by scanning the whole screen (or a dedicated region) on a stand-alone computer or in headless container screens, searching for provided image patterns.</p>

<p>Screenshot based actions are relying on an abstract <code>Region</code> class, which represents an abstract region on the desktop.
When creating a new instance without parameters, a <code>Region</code> spans over the whole desktop.
But, it is also possible to create new regions by specifying <code>left</code>, <code>top</code>, <code>width</code> and <code>height</code> parameters.</p>

<p>The following example represents a test which drags a source element to a target region.
In this demo scenario, both source and target are both located on screen via template image.
To reproduce this scenario, you need to capture screenshots of the egg and the pan.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript">(<span style="color:#a6e22e">async</span> () <span style="color:#f92672">=&gt;</span> {
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">testCase</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">TestCase</span>(<span style="color:#e6db74">&#34;native_keyboard_demo&#34;</span>);
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">url</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://codepen.io/naturalhanglider/full/jQMWoq&#34;</span>;
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">screen</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Region</span>();
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">env</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Environment</span>();
    <span style="color:#66d9ef">try</span> {
        <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">_navigateTo</span>(<span style="color:#a6e22e">url</span>);
        <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">setSimilarity</span>(<span style="color:#ae81ff">0.8</span>);
        <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">screen</span>
            .<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#34;source_egg.png&#34;</span>)
            .<span style="color:#a6e22e">mouseMove</span>()
            .<span style="color:#a6e22e">dragAndDropTo</span>(
                <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">screen</span>.<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#34;target_pan.png&#34;</span>)
            );
        <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">_wait</span>(<span style="color:#ae81ff">3000</span>);
    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
        <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">testCase</span>.<span style="color:#a6e22e">handleException</span>(<span style="color:#a6e22e">e</span>);
    } <span style="color:#66d9ef">finally</span> {
        <span style="color:#a6e22e">testCase</span>.<span style="color:#a6e22e">saveResult</span>();
    }
})();</code></pre></div>

<!--self built wrapper with a frame and shaddow
<div style="background-color: #fff; padding: 20px; margin-top:10px; margin-bottom:10px; box-shadow: 0px 0px 5px #383838;">
</div>
-->


<div style="background-color: #fff; padding: 20px; box-shadow: 0px 0px 10px #7C7C7B; margin-left: 0%; margin-right: 0%; margin-top: 50px; margin-bottom: 50px">
    <video width="100%" style='margin: 0' controls >
        <source src="/docs/videos/FryAnEgg.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    
</div>



<p>The <code>dragAndDropTo(...)</code> methods always move straight to the target region.
In order to follow a more complex path, it is also possible to perform the drag gesture manually.
Once the source image has been located on the screen, Sakuli moves the mouse to its location, presses and holds the left mouse button.
Afterwards, it locates the target image, moves the mouse there while still holding the mouse button and releases it, once it reaches the target location.
To reproduce this scenario, you need to capture screenshots of the egg and the pan.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript">(<span style="color:#a6e22e">async</span> () <span style="color:#f92672">=&gt;</span> {
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">testCase</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">TestCase</span>(<span style="color:#e6db74">&#34;native_demo&#34;</span>);
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">url</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://codepen.io/naturalhanglider/full/jQMWoq&#34;</span>;
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">screen</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Region</span>();
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">env</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Environment</span>();
    <span style="color:#66d9ef">try</span> {
        <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">_navigateTo</span>(<span style="color:#a6e22e">url</span>);
        <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">setSimilarity</span>(<span style="color:#ae81ff">0.8</span>);
        <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">screen</span>
            .<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#34;source_egg.png&#34;</span>)
            .<span style="color:#a6e22e">mouseMove</span>()
            .<span style="color:#a6e22e">mouseDown</span>(<span style="color:#a6e22e">MouseButton</span>.<span style="color:#a6e22e">LEFT</span>)
            .<span style="color:#a6e22e">setX</span>(<span style="color:#ae81ff">0</span>)
            .<span style="color:#a6e22e">setY</span>(<span style="color:#ae81ff">0</span>)
            .<span style="color:#a6e22e">mouseMove</span>()
            .<span style="color:#a6e22e">move</span>(<span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">700</span>)
            .<span style="color:#a6e22e">mouseMove</span>();
        <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">screen</span>.<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#34;target_pan.png&#34;</span>)
            .<span style="color:#a6e22e">mouseMove</span>()
            .<span style="color:#a6e22e">mouseUp</span>(<span style="color:#a6e22e">MouseButton</span>.<span style="color:#a6e22e">LEFT</span>);
        <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">_wait</span>(<span style="color:#ae81ff">3000</span>);
    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
        <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">testCase</span>.<span style="color:#a6e22e">handleException</span>(<span style="color:#a6e22e">e</span>);
    } <span style="color:#66d9ef">finally</span> {
        <span style="color:#a6e22e">testCase</span>.<span style="color:#a6e22e">saveResult</span>();
    }
})();</code></pre></div>

<h2 id="how-to-control-the-mouse-in-a-sakuli-test">How to Control the Mouse in a Sakuli Test</h2>

<p>Sakuli provides two ways to steer mouse movement. Either via coordinates, or via screenshot data. In order to search for
image data on your screen you have to instantiate a <code>Region</code> spanning the entire display to access it&rsquo;s image content.</p>

<h3 id="moving-the-mouse-to-a-screenshot">Moving the mouse to a screenshot</h3>

<p>To find a screenshot on the screen, you can use <code>find</code> or <code>waitForImage</code>. With <code>waitForImage</code> you can specify a timeout
in which Sakuli continuously searches for the screenshot. This is useful, when e.g. starting a program like excel.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">screen</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Region</span>();
<span style="color:#a6e22e">await</span> <span style="color:#a6e22e">screen</span>.<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#34;search_this_screenshot.jpg&#34;</span>)
    .<span style="color:#a6e22e">mouseMove</span>();
    
<span style="color:#75715e">//searches the screen for 5 seconds for the excel homescreen
</span><span style="color:#75715e"></span><span style="color:#a6e22e">await</span> <span style="color:#a6e22e">screen</span>.<span style="color:#a6e22e">waitForImage</span>(<span style="color:#e6db74">&#34;excel_homescreen.jpg&#34;</span>, <span style="color:#ae81ff">5000</span>)
    .<span style="color:#a6e22e">mouseMove</span>();</code></pre></div>

<p><code>find</code> and <code>waitForImage</code> will return a <code>Region</code> for matched screenshots, so chaining as follows might not work, if the
second screenshot is not within the <code>Region</code> of the first one.
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">screen</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Region</span>();
<span style="color:#a6e22e">await</span> <span style="color:#a6e22e">screen</span>.<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#34;google_search.png&#34;</span>)
    .<span style="color:#a6e22e">mouseMove</span>()
    .<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#34;browser_address_bar.jpg&#34;</span>)
    .<span style="color:#a6e22e">mouseMove</span>();</code></pre></div></p>

<p>To get around this problem, you can use <code>left(range)</code>, <code>right(range)</code>, <code>above(range)</code> or <code>below(range)</code>, which returns a
new <code>Region</code>. <code>left(range)</code> return a <code>Region</code> that is left of the current region&rsquo;s border with a width of <em>range</em>, so it
does not include the current Region. <code>right</code>, <code>below</code> and <code>above</code> behaves equivalently.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">screen</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Region</span>();
<span style="color:#a6e22e">await</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Region</span>(<span style="color:#ae81ff">500</span>, <span style="color:#ae81ff">500</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>).<span style="color:#a6e22e">left</span>(<span style="color:#ae81ff">200</span>)
<span style="color:#960050;background-color:#1e0010">//this returns a new region with (300/500/200/100)</span></code></pre></div>

<p>You can also manipulate the current <code>Region</code> with <code>setX(number)</code>, <code>setY(number)</code>, <code>setH(number)</code>, <code>setW(number)</code> or
<code>grow(range)</code>. With <code>grow</code> you can expand the current region with <em>range</em> px in all four directions.
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#a6e22e">await</span> <span style="color:#a6e22e">screen</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Region</span>();
<span style="color:#a6e22e">await</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Region</span>(<span style="color:#ae81ff">500</span>, <span style="color:#ae81ff">500</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>).<span style="color:#a6e22e">grow</span>(<span style="color:#ae81ff">100</span>);
<span style="color:#960050;background-color:#1e0010">//this returns a new region with (400, 400, 300,300)</span></code></pre></div></p>

<h3 id="moving-the-mouse-relative-to-current-position">Moving the mouse relative to current position</h3>

<p>One way to change a <code>Region</code>&rsquo;s position is to use the <code>move(x, y)</code> method. This allows us to shift a region in <code>x</code> and / or <code>y</code> direction, e.g.
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">screen</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Region</span>();
<span style="color:#a6e22e">await</span> <span style="color:#a6e22e">screen</span>.<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#34;login_mask.png&#34;</span>)
    .<span style="color:#a6e22e">mouseMove</span>()
    .<span style="color:#a6e22e">click</span>()
    .<span style="color:#a6e22e">type</span>(<span style="color:#e6db74">&#34;MyUsername&#34;</span>)
    <span style="color:#75715e">//shifts the region 50px down to e.g. a password field
</span><span style="color:#75715e"></span>    .<span style="color:#a6e22e">move</span>(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">50</span>)
    <span style="color:#75715e">//moves the mouse according to the shifted region
</span><span style="color:#75715e"></span>    .<span style="color:#a6e22e">mouseMove</span>()
    .<span style="color:#a6e22e">click</span>()
    .<span style="color:#a6e22e">type</span>(<span style="color:#e6db74">&#34;MyPassword&#34;</span>)
    <span style="color:#75715e">//shifts the region 50px down and 50px to the right and moves the mouse to e.g. the login button
</span><span style="color:#75715e"></span>    .<span style="color:#a6e22e">move</span>(<span style="color:#ae81ff">50</span>,<span style="color:#ae81ff">50</span>)
    .<span style="color:#a6e22e">mouseMove</span>()
    .<span style="color:#a6e22e">click</span>();
})();</code></pre></div></p>

<h3 id="moving-the-mouse-to-an-absolute-position">Moving the Mouse to an Absolute Position</h3>

<p>Due to the fact that <code>mouseMove()</code> always moves the mouse to the <strong>center</strong> of a <code>region</code>, we need to instantiate a
<code>region</code> with a height and width of 1.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">screen</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Region</span>();
<span style="color:#a6e22e">await</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Region</span>(<span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>).<span style="color:#a6e22e">mouseMove</span>();
<span style="color:#960050;background-color:#1e0010">//moves the mouse cursor to (100/200)</span></code></pre></div>

<h3 id="drag-and-drop">Drag And Drop</h3>

<p>There are two ways to use drag and drop. Firstly, you can use <code>dragAndDropTo()</code>, which drags from one point to another.
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">screen</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Region</span>();
<span style="color:#a6e22e">await</span> <span style="color:#a6e22e">screen</span>.<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#34;drag_mouse_start.png&#34;</span>).<span style="color:#a6e22e">mouseMove</span>().<span style="color:#a6e22e">dragAndDropTo</span>(<span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Region</span>(<span style="color:#ae81ff">200</span>,<span style="color:#ae81ff">200</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>));

<span style="color:#a6e22e">await</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Region</span>(<span style="color:#ae81ff">300</span>,<span style="color:#ae81ff">300</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>).<span style="color:#a6e22e">mouseMove</span>().<span style="color:#a6e22e">dragAndDropTo</span>(<span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Region</span>(<span style="color:#ae81ff">1000</span>, <span style="color:#ae81ff">1000</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>));

<span style="color:#a6e22e">await</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Region</span>(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>).<span style="color:#a6e22e">mouseMove</span>().<span style="color:#a6e22e">dragAndDropTo</span>(<span style="color:#a6e22e">await</span> <span style="color:#a6e22e">screen</span>.<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#34;drag_mouse_end.png&#34;</span>));</code></pre></div></p>

<p>Using <code>mouseDown</code>/<code>mouseUp</code> allows us to drag and drop over multiple locations.
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">screen</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Region</span>();
<span style="color:#a6e22e">await</span> <span style="color:#a6e22e">screen</span>.<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#34;drag_mouse_start.png&#34;</span>)
    .<span style="color:#a6e22e">mouseMove</span>()
    .<span style="color:#a6e22e">mouseDown</span>(<span style="color:#a6e22e">MouseButton</span>.<span style="color:#a6e22e">LEFT</span>)
    .<span style="color:#a6e22e">move</span>(<span style="color:#ae81ff">200</span>,<span style="color:#ae81ff">200</span>)
    .<span style="color:#a6e22e">mouseMove</span>()
    .<span style="color:#a6e22e">move</span>(<span style="color:#f92672">-</span><span style="color:#ae81ff">100</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">100</span>)
    .<span style="color:#a6e22e">mouseMove</span>()
    .<span style="color:#a6e22e">mouseUp</span>(<span style="color:#a6e22e">MouseButton</span>.<span style="color:#a6e22e">LEFT</span>);</code></pre></div></p>

<p><code>mouseUp</code>/<code>mouseDown</code> can be used with either <code>MouseButton.LEFT</code>, <code>MouseButton.MIDDLE</code> or <code>MouseButton.RIGHT</code>.</p>

<p><code>Region</code> also provides methods to use the keyboards, which also are implemented by <code>Environment</code>. This allows for easy
chaining, like
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">screen</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Region</span>();
<span style="color:#a6e22e">await</span> <span style="color:#a6e22e">screen</span>.<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#34;google_search.png&#34;</span>)
    .<span style="color:#a6e22e">mouseMove</span>()
    .<span style="color:#a6e22e">click</span>()
    .<span style="color:#a6e22e">type</span>(<span style="color:#e6db74">&#34;sakuli.io&#34;</span>)
    <span style="color:#75715e">//moves to the search button
</span><span style="color:#75715e"></span>    .<span style="color:#a6e22e">move</span>(<span style="color:#f92672">-</span><span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
    .<span style="color:#a6e22e">mouseMove</span>()
    .<span style="color:#a6e22e">click</span>()
    .<span style="color:#a6e22e">sleepMs</span>(<span style="color:#ae81ff">1000</span>)
    <span style="color:#75715e">//moves to the first search result
</span><span style="color:#75715e"></span>    .<span style="color:#a6e22e">move</span>(<span style="color:#f92672">-</span><span style="color:#ae81ff">400</span>,<span style="color:#ae81ff">100</span>)
    .<span style="color:#a6e22e">click</span>();</code></pre></div></p>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/docs/writing_tests/interact/" title="Interact"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/docs/writing_tests/webtests/" title="Webtests" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/docs/js/clipboard.min.js"></script>
    <script src="/docs/js/perfect-scrollbar.min.js"></script>
    <script src="/docs/js/perfect-scrollbar.jquery.min.js"></script>
    <script src="/docs/js/jquery.sticky.js"></script>
    <script src="/docs/js/featherlight.min.js"></script>
    <script src="/docs/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/docs/js/modernizr.custom-3.6.0.js"></script>
    <script src="/docs/js/learn.js"></script>
    <script src="/docs/js/hugo-learn.js"></script>

    <link href="/docs/mermaid/mermaid.css" rel="stylesheet" />
    <script src="/docs/mermaid/mermaid.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

