<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    
      
      
      <script data-name="googleanalytics" data-type="application/javascript" type="text/plain">(function (w, d, s, l, i) {
                      w[l] = w[l] || []; w[l].push({
                          'gtm.start':
                              new Date().getTime(), event: 'gtm.js'
                      }); var f = d.getElementsByTagName(s)[0],
                          j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                              'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
                  })(window, document, 'script', 'dataLayer', 'GTM-TMFSKHB');</script>
      
    
    
      <script data-type="application/javascript" type="text/plain" data-src="https://app.primeleads.de/api/v1/4uewa4e9rh"
        data-name="primeLeads"></script>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.68.3" />
    <meta name="description" content="">


    <link rel="icon" href="/docs/images/favicon.png" type="image/png">

    <title>Sakuli</title>

    
    <link href="/docs/css/nucleus.css" rel="stylesheet">
    <link href="/docs/css/fontawesome-all.min.css" rel="stylesheet">
    <link href="/docs/css/hybrid.css" rel="stylesheet">
    <link href="/docs/css/featherlight.min.css" rel="stylesheet">
    <link href="/docs/css/perfect-scrollbar.min.css" rel="stylesheet">
    <link href="/docs/css/auto-complete.css" rel="stylesheet">
    <link href="/docs/css/atom-one-dark-reasonable.css" rel="stylesheet">
    <link href="/docs/css/theme.css" rel="stylesheet">
    <link href="/docs/css/hugo-theme.css" rel="stylesheet">
    

    <script src="/docs/js/jquery-3.3.1.min.js"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="/docs/writing_tests/tutorial/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">
  <img src="/docs/images/sakuli_01.svg" style="width: 250px; display: block; height: auto" />
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/docs/js/lunr.min.js"></script>
<script type="text/javascript" src="/docs/js/auto-complete.js"></script>
<script type="text/javascript">
    
        var baseurl = "\/docs";
    
</script>
<script type="text/javascript" src="/docs/js/search.js"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/docs/getting-started/" title="Getting Started" class="dd-item
        
        
        
        ">
      <a href="/docs/getting-started/">
          <i class='fas fa-chevron-right'></i>  Getting Started
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/docs/getting-started/prerequisites/" title="Prerequisites" class="dd-item ">
        <a href="/docs/getting-started/prerequisites/">
        Prerequisites
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/getting-started/initialization/" title="Initialization" class="dd-item ">
        <a href="/docs/getting-started/initialization/">
        Initialization
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/getting-started/installation/" title="Installation" class="dd-item ">
        <a href="/docs/getting-started/installation/">
        Installation
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/getting-started/firsttest/" title="First Setup" class="dd-item ">
        <a href="/docs/getting-started/firsttest/">
        First Setup
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/getting-started/version-control/" title="Version control systems" class="dd-item ">
        <a href="/docs/getting-started/version-control/">
        Version control systems
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs/writing_tests/" title="Writing Tests" class="dd-item
        parent
        
        
        ">
      <a href="/docs/writing_tests/">
          <i class='fas fa-chevron-right'></i>  Writing Tests
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/docs/writing_tests/anatomy/" title="Anatomy" class="dd-item ">
        <a href="/docs/writing_tests/anatomy/">
        Anatomy
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/writing_tests/interact/" title="Interact" class="dd-item ">
        <a href="/docs/writing_tests/interact/">
        Interact
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/writing_tests/screenshot/" title="Screenshot" class="dd-item ">
        <a href="/docs/writing_tests/screenshot/">
        Screenshot
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/writing_tests/application/" title="Native applications" class="dd-item ">
        <a href="/docs/writing_tests/application/">
        Native applications
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/writing_tests/webtests/" title="Webtests" class="dd-item ">
        <a href="/docs/writing_tests/webtests/">
        Webtests
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/writing_tests/tutorial/" title="Tutorial" class="dd-item active">
        <a href="/docs/writing_tests/tutorial/">
        Tutorial
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs/configuring_tests/" title="Configuring Tests" class="dd-item
        
        
        
        ">
      <a href="/docs/configuring_tests/">
          <i class='fas fa-chevron-right'></i>  Configuring Tests
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs/enterprise_features/" title="Enterprise Features" class="dd-item
        
        
        
        ">
      <a href="/docs/enterprise_features/">
          <i class='fas fa-chevron-right'></i>  Enterprise Features
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/docs/enterprise_features/icinga/" title="Icinga2 Forwarder" class="dd-item ">
        <a href="/docs/enterprise_features/icinga/">
        Icinga2 Forwarder
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/enterprise_features/prometheus/" title="Prometheus Fowarder" class="dd-item ">
        <a href="/docs/enterprise_features/prometheus/">
        Prometheus Fowarder
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/enterprise_features/check/" title="checkmk Fowarder" class="dd-item ">
        <a href="/docs/enterprise_features/check/">
        checkmk Fowarder
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/enterprise_features/omd/" title="OMD Forwarder" class="dd-item ">
        <a href="/docs/enterprise_features/omd/">
        OMD Forwarder
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/enterprise_features/e2e/" title="Container" class="dd-item ">
        <a href="/docs/enterprise_features/e2e/">
        Container
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/enterprise_features/s2i/" title="S2I Image" class="dd-item ">
        <a href="/docs/enterprise_features/s2i/">
        S2I Image
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs/cli/" title="CLI" class="dd-item
        
        
        
        ">
      <a href="/docs/cli/">
          <i class='fas fa-chevron-right'></i>  CLI
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs/cookbook/" title="Cookbook" class="dd-item
        
        
        
        ">
      <a href="/docs/cookbook/">
          <i class='fas fa-chevron-right'></i>  Cookbook
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/docs/cookbook/logging/" title="Logging" class="dd-item ">
        <a href="/docs/cookbook/logging/">
        Logging
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/cookbook/handling-forms/" title="Handling forms" class="dd-item ">
        <a href="/docs/cookbook/handling-forms/">
        Handling forms
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/cookbook/waiting/" title="Waiting" class="dd-item ">
        <a href="/docs/cookbook/waiting/">
        Waiting
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/cookbook/invalid-session-id/" title="Error: Invalid session id" class="dd-item ">
        <a href="/docs/cookbook/invalid-session-id/">
        Error: Invalid session id
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/cookbook/container/" title="Run Container" class="dd-item ">
        <a href="/docs/cookbook/container/">
        Run Container
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/cookbook/proxy/" title="Container and Proxies" class="dd-item ">
        <a href="/docs/cookbook/proxy/">
        Container and Proxies
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/cookbook/frames/" title="Frames" class="dd-item ">
        <a href="/docs/cookbook/frames/">
        Frames
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs/change_notes/" title="Change notes" class="dd-item
        
        
        
        ">
      <a href="/docs/change_notes/">
          <i class='fas fa-chevron-right'></i>  Change notes
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/docs/change_notes/2.3.0/" title="V2.3.0" class="dd-item ">
        <a href="/docs/change_notes/2.3.0/">
        V2.3.0
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      


      
      <div id="apiHead" class="padding">API Docs</div>
      <ul id="apiMenu">
        <li><a href="/apidoc/sakuli-legacy" target="_blank" >@sakuli/legacy</a></li>
      </ul>

      

      <hr/>

      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      <li>
        <a class="padding" onclick="klaro.show();return false;">
          <i class="fas fa-cog fa-fw"></i> Cookie Settings
        </a>
      </li>
      <li>
        <a class="padding" href="/dataprivacy/">
          <i class="fas fa-user-secret fa-fw"></i> Data Privacy
        </a>
      </li>
      <li>
        <a class="padding" href="/legalnotice/">
          <i class="fas fa-balance-scale fa-fw"></i> Legal Notice
        </a>
      </li>
      
      </ul>
    </section>
    
    <section id="footer">
      

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt" ></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/docs/'></a> > <a href='/docs/writing_tests/'>Writing Tests</a> > Tutorial
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#setting-up-a-sakuli-test-suite">Setting up a Sakuli Test Suite</a>
      <ul>
        <li><a href="#typescript">Typescript</a></li>
      </ul>
    </li>
    <li><a href="#native-testing-tutorial">Native-testing Tutorial</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            
          

        



<h1 id="tutorial">Tutorial</h1>
<p>This tutorial shows how to set up a Sakuli test using the CLI and how to use a combination of the native and DOM-based
features of Sakuli.</p>
<h2 id="setting-up-a-sakuli-test-suite">Setting up a Sakuli Test Suite</h2>
<p>Sakuli will bootstrap a test suite with the following command. A detailed explanation on what files are needed, can be found
<a href="anatomy.md">in anatomy chapter</a>.
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npx @sakuli/cli create project . --package
npm i</code></pre></div></p>
<h3 id="typescript">Typescript</h3>
<p>This step is optional but we recommend using typescript. For example, in case of a missing <code>await</code> typescript will throw
an error during compilation. But this tutorial will also work if you decide to not use typescript.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npx sakuli enable-typescript .</code></pre></div>
<p>For Typescript to find the respective test-files, you need to change the file extension from <code>.js</code> for JavaScript to <code>.ts</code>
for TypeScript or create a new file. After doing so, it is necessary to update <code>testsuite.suite</code> for Sakuli to find the
testfile.</p>
<h2 id="native-testing-tutorial">Native-testing Tutorial</h2>
<p>For this tutorial we will create a test that opens the <code>10 Step Guide to E2E Monitoring</code> whitepaper only using native interaction
and download the document. As we only want to use native interaction we can set <code>testsuite.uiOnly=true</code> in the <code>testsuite.properties</code>.</p>
<p>First we are going to open a chromium browser, navigate to the whitepaper section and download the whitepaper.
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript">(<span style="color:#a6e22e">async</span> () <span style="color:#f92672">=&gt;</span> {
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">tc</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">TestCase</span>();
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">env</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Environment</span>();
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">chromium</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Application</span>(<span style="color:#e6db74">&#39;chromium-browser --incognito&#39;</span>);
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">screen</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Region</span>();

  <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">tc</span>.<span style="color:#a6e22e">addImagePaths</span>(<span style="color:#e6db74">&#39;./assets&#39;</span>);
  <span style="color:#66d9ef">try</span> {
    <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">setSimilarity</span>(<span style="color:#ae81ff">0.99</span>);

    <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">chromium</span>.<span style="color:#a6e22e">setSleepTime</span>(<span style="color:#ae81ff">3</span>);
    <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">chromium</span>.<span style="color:#a6e22e">open</span>();

    <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">type</span>(<span style="color:#e6db74">&#39;sakuli.io/wp&#39;</span>)
      .<span style="color:#a6e22e">type</span>(<span style="color:#a6e22e">Key</span>.<span style="color:#a6e22e">ENTER</span>)
      .<span style="color:#a6e22e">getRegionFromFocusedWindow</span>()
      .<span style="color:#a6e22e">waitForImage</span>(<span style="color:#e6db74">&#39;open_whitepaper.png&#39;</span>, <span style="color:#ae81ff">3</span>)
      .<span style="color:#a6e22e">mouseMove</span>()
      .<span style="color:#a6e22e">click</span>();
    <span style="color:#a6e22e">tc</span>.<span style="color:#a6e22e">endOfStep</span>(<span style="color:#e6db74">&#39;open whitepaper&#39;</span>);

  } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
    <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">tc</span>.<span style="color:#a6e22e">handleException</span>(<span style="color:#a6e22e">e</span>);
  } <span style="color:#66d9ef">finally</span> {
    <span style="color:#a6e22e">tc</span>.<span style="color:#a6e22e">saveResult</span>();
  }
})();
</code></pre></div></p>
<p>The following section will describes the details of the test. As a first step we want to open the chromium browser and
use incognito mode. This can be achieved by opening the application with the respective parameter:
<code>const chromium = new Application('chromium-browser --incognito');</code></p>
<p>As we are using multiple screenshot for this testcase, we will add them to a new folder and therefore eliminate cluttering of the
testcase folder. Hence you need to use <code>tc.addImagePaths(&quot;./assets&quot;)</code> to tell Sakuli to look into this folder. The base
directory during the Sakuli test is the corresponding testcase folder.</p>
<p>Next we are setting the similarity level for image recognition. The higher the value you choose, the higher the matching
score must be. You can also change this within your test to react to different matching-score needs.</p>
<p>As the operating system needs some time to start the application (in this case the browser), we will set a sleeptime.</p>
<p>After the chromium browser is opened the focus will be on the url-tab by default - we can just start typing the url we want to navigate to and hit Enter. The next step is to get the region of the desktop and search for the icon of the whitepaper:
<!-- raw HTML omitted --></p>
<p>After clicking the icon, the whitepaper PDF will be opened in a new tab. To verify whether the whitepaper was opened
correctly, we try to find the following screenshot on the screen:
<!-- raw HTML omitted --></p>
<p>To do so, we add the following lines to our test:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#a6e22e">await</span> <span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">setSimilarity</span>(<span style="color:#ae81ff">0.98</span>);
<span style="color:#a6e22e">await</span> <span style="color:#a6e22e">screen</span>.<span style="color:#a6e22e">waitForImage</span>(<span style="color:#e6db74">&#39;whitepaper.png&#39;</span>, <span style="color:#ae81ff">3</span>);
<span style="color:#a6e22e">tc</span>.<span style="color:#a6e22e">endOfStep</span>(<span style="color:#e6db74">&#39;validate open whitepaper&#39;</span>);
</code></pre></div>
<p>As a last step we want to print this whitepaper as a pdf (saving it to the file-system). We can do this with the following code:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#a6e22e">await</span> <span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">type</span>(<span style="color:#a6e22e">Key</span>.<span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">Key</span>.<span style="color:#a6e22e">CTRL</span>)
  .<span style="color:#a6e22e">getRegionFromFocusedWindow</span>()
  .<span style="color:#a6e22e">waitForImage</span>(<span style="color:#e6db74">&#34;print_dialog.png&#34;</span>,<span style="color:#ae81ff">2</span>)
  .<span style="color:#a6e22e">mouseMove</span>()
  .<span style="color:#a6e22e">click</span>()
  .<span style="color:#a6e22e">sleep</span>(<span style="color:#ae81ff">1</span>)
  .<span style="color:#a6e22e">type</span>(<span style="color:#e6db74">&#34;sakuli-tutorial&#34;</span>)
  .<span style="color:#a6e22e">type</span>(<span style="color:#a6e22e">Key</span>.<span style="color:#a6e22e">ENTER</span>);
<span style="color:#a6e22e">tc</span>.<span style="color:#a6e22e">endOfStep</span>(<span style="color:#e6db74">&#34;download whitepaper&#34;</span>);
</code></pre></div></p>
<p>With <code>CTRL+P</code> we open the print dialog which could look like this.
<!-- raw HTML omitted --></p>
<p>Now we need to move the mouse to the save button and click using this screenshot:
<!-- raw HTML omitted --></p>
<p>Afterwards another pop up dialog appears, which allows us to change the name of the pdf-file.
For this instance we want to name it <code>sakuli-tutorial</code>.
In the end we need to press enter to save the file.</p>
<p>The complete Sakuli test should look like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript">(<span style="color:#a6e22e">async</span> () <span style="color:#f92672">=&gt;</span> {
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">tc</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">TestCase</span>();
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">env</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Environment</span>();
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">chromium</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Application</span>(<span style="color:#e6db74">&#39;chromium-browser --incognito&#39;</span>);
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">screen</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Region</span>();

  <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">tc</span>.<span style="color:#a6e22e">addImagePaths</span>(<span style="color:#e6db74">&#39;./assets&#39;</span>);
  <span style="color:#66d9ef">try</span> {
    <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">setSimilarity</span>(<span style="color:#ae81ff">0.99</span>);

    <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">chromium</span>.<span style="color:#a6e22e">setSleepTime</span>(<span style="color:#ae81ff">3</span>);
    <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">chromium</span>.<span style="color:#a6e22e">open</span>();

    <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">type</span>(<span style="color:#e6db74">&#39;sakuli.io/wp&#39;</span>)
      .<span style="color:#a6e22e">type</span>(<span style="color:#a6e22e">Key</span>.<span style="color:#a6e22e">ENTER</span>)
      .<span style="color:#a6e22e">getRegionFromFocusedWindow</span>()
      .<span style="color:#a6e22e">waitForImage</span>(<span style="color:#e6db74">&#39;open_whitepaper.png&#39;</span>, <span style="color:#ae81ff">3</span>)
      .<span style="color:#a6e22e">mouseMove</span>()
      .<span style="color:#a6e22e">click</span>();
    <span style="color:#a6e22e">tc</span>.<span style="color:#a6e22e">endOfStep</span>(<span style="color:#e6db74">&#39;open whitepaper&#39;</span>);

    <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">setSimilarity</span>(<span style="color:#ae81ff">0.98</span>);
    <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">screen</span>.<span style="color:#a6e22e">waitForImage</span>(<span style="color:#e6db74">&#39;whitepaper.png&#39;</span>, <span style="color:#ae81ff">3</span>);
    <span style="color:#a6e22e">tc</span>.<span style="color:#a6e22e">endOfStep</span>(<span style="color:#e6db74">&#39;validate open whitepaper&#39;</span>);

    <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">type</span>(<span style="color:#a6e22e">Key</span>.<span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">Key</span>.<span style="color:#a6e22e">CTRL</span>)
      .<span style="color:#a6e22e">getRegionFromFocusedWindow</span>()
      .<span style="color:#a6e22e">waitForImage</span>(<span style="color:#e6db74">&#34;print_dialog_save.png&#34;</span>,<span style="color:#ae81ff">2</span>)
      .<span style="color:#a6e22e">mouseMove</span>()
      .<span style="color:#a6e22e">click</span>()
      .<span style="color:#a6e22e">sleep</span>(<span style="color:#ae81ff">1</span>)
      .<span style="color:#a6e22e">type</span>(<span style="color:#e6db74">&#34;sakuli-tutorial&#34;</span>)
      .<span style="color:#a6e22e">type</span>(<span style="color:#a6e22e">Key</span>.<span style="color:#a6e22e">ENTER</span>);
    <span style="color:#a6e22e">tc</span>.<span style="color:#a6e22e">endOfStep</span>(<span style="color:#e6db74">&#34;download whitepaper&#34;</span>);

    <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">chromium</span>.<span style="color:#a6e22e">close</span>();
  } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
    <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">tc</span>.<span style="color:#a6e22e">handleException</span>(<span style="color:#a6e22e">e</span>);
  } <span style="color:#66d9ef">finally</span> {
    <span style="color:#a6e22e">tc</span>.<span style="color:#a6e22e">saveResult</span>();
  }
})();
</code></pre></div>
<h1 id="combining-dom-and-native-testing">Combining DOM and Native Testing</h1>
<p>When the <code>testsuite.uiOnly</code> is set to <code>false</code>, you can use both DOM based- and native interaction simultaneously. For our example above we can exchange the steps for opening chromium and navigating to sakuli.io/wp just with <code>_navigateTo(&quot;https://sakuli.io/wp&quot;)</code> .</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript">(<span style="color:#a6e22e">async</span> () <span style="color:#f92672">=&gt;</span> {
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">tc</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">TestCase</span>();
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">env</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Environment</span>();
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">screen</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Region</span>();

  <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">tc</span>.<span style="color:#a6e22e">addImagePaths</span>(<span style="color:#e6db74">&#39;./assets&#39;</span>);
  <span style="color:#66d9ef">try</span> {
    <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">setSimilarity</span>(<span style="color:#ae81ff">0.99</span>);

    <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">_navigateTo</span>(<span style="color:#e6db74">&#34;https://sakuli.io/wp&#34;</span>);
    <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">_click</span>(<span style="color:#a6e22e">_image</span>(<span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">_in</span>(<span style="color:#a6e22e">_div</span>(<span style="color:#e6db74">&#34;flexedContainer&#34;</span>))));
    <span style="color:#a6e22e">tc</span>.<span style="color:#a6e22e">endOfStep</span>(<span style="color:#e6db74">&#39;open whitepaper&#39;</span>);

    <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">screen</span>.<span style="color:#a6e22e">waitForImage</span>(<span style="color:#e6db74">&#39;whitepaper.png&#39;</span>, <span style="color:#ae81ff">3</span>);
    <span style="color:#a6e22e">tc</span>.<span style="color:#a6e22e">endOfStep</span>(<span style="color:#e6db74">&#39;validate open whitepaper&#39;</span>);

    <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">type</span>(<span style="color:#a6e22e">Key</span>.<span style="color:#a6e22e">P</span>, <span style="color:#a6e22e">Key</span>.<span style="color:#a6e22e">CTRL</span>)
      .<span style="color:#a6e22e">getRegionFromFocusedWindow</span>()
      .<span style="color:#a6e22e">waitForImage</span>(<span style="color:#e6db74">&#34;print_dialog.png&#34;</span>,<span style="color:#ae81ff">2</span>)
      .<span style="color:#a6e22e">mouseMove</span>()
      .<span style="color:#a6e22e">click</span>()
      .<span style="color:#a6e22e">sleep</span>(<span style="color:#ae81ff">1</span>)
      .<span style="color:#a6e22e">type</span>(<span style="color:#e6db74">&#34;sakuli-tutorial&#34;</span>)
      .<span style="color:#a6e22e">type</span>(<span style="color:#a6e22e">Key</span>.<span style="color:#a6e22e">ENTER</span>);
    <span style="color:#a6e22e">tc</span>.<span style="color:#a6e22e">endOfStep</span>(<span style="color:#e6db74">&#34;download whitepaper&#34;</span>);

  } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
    <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">tc</span>.<span style="color:#a6e22e">handleException</span>(<span style="color:#a6e22e">e</span>);
  } <span style="color:#66d9ef">finally</span> {
    <span style="color:#a6e22e">tc</span>.<span style="color:#a6e22e">saveResult</span>();
  }
})();
</code></pre></div>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/docs/writing_tests/webtests/" title="Webtests"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/docs/configuring_tests/" title="Configuring Tests" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/docs/js/clipboard.min.js"></script>
    <script src="/docs/js/perfect-scrollbar.min.js"></script>
    <script src="/docs/js/perfect-scrollbar.jquery.min.js"></script>
    <script src="/docs/js/jquery.sticky.js"></script>
    <script src="/docs/js/featherlight.min.js"></script>
    <script src="/docs/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/docs/js/modernizr.custom-3.6.0.js"></script>
    <script src="/docs/js/learn.js"></script>
    <script src="/docs/js/hugo-learn.js"></script>
    <script src="/docs/js/klaroCookie/config.js"></script>
    <script src="/docs/js/klaroCookie/klaro.js"></script>

    <link href="/docs/mermaid/mermaid.css" rel="stylesheet" />
    <script src="/docs/mermaid/mermaid.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

