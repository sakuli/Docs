<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.56.3" />
    <meta name="description" content="">


    <link rel="icon" href="/docs/images/favicon.png" type="image/png">

    <title>Sakuli</title>

    
    <link href="/docs/css/nucleus.css" rel="stylesheet">
    <link href="/docs/css/fontawesome-all.min.css" rel="stylesheet">
    <link href="/docs/css/hybrid.css" rel="stylesheet">
    <link href="/docs/css/featherlight.min.css" rel="stylesheet">
    <link href="/docs/css/perfect-scrollbar.min.css" rel="stylesheet">
    <link href="/docs/css/auto-complete.css" rel="stylesheet">
    <link href="/docs/css/atom-one-dark-reasonable.css" rel="stylesheet">
    <link href="/docs/css/theme.css" rel="stylesheet">
    <link href="/docs/css/hugo-theme.css" rel="stylesheet">
    

    <script src="/docs/js/jquery-3.3.1.min.js"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="/docs/enterprise_features/check/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">
  <img src="/docs/images/sakuli_01.svg" width="90%" height="auto" />
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/docs/js/lunr.min.js"></script>
<script type="text/javascript" src="/docs/js/auto-complete.js"></script>
<script type="text/javascript">
    
        var baseurl = "\/docs";
    
</script>
<script type="text/javascript" src="/docs/js/search.js"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/docs/getting-started/" title="Getting Started" class="dd-item
        
        
        
        ">
      <a href="/docs/getting-started/">
          <i class='fas fa-chevron-right'></i>  Getting Started
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/docs/getting-started/prerequisites/" title="Prerequisites" class="dd-item ">
        <a href="/docs/getting-started/prerequisites/">
        Prerequisites
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/getting-started/initialization/" title="Initialization" class="dd-item ">
        <a href="/docs/getting-started/initialization/">
        Initialization
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/getting-started/installation/" title="Installation" class="dd-item ">
        <a href="/docs/getting-started/installation/">
        Installation
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/getting-started/firsttest/" title="First Setup" class="dd-item ">
        <a href="/docs/getting-started/firsttest/">
        First Setup
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs/writing_tests/" title="Writing Tests" class="dd-item
        
        
        
        ">
      <a href="/docs/writing_tests/">
          <i class='fas fa-chevron-right'></i>  Writing Tests
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/docs/writing_tests/anatomy/" title="Anatomy" class="dd-item ">
        <a href="/docs/writing_tests/anatomy/">
        Anatomy
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/writing_tests/interact/" title="Interact" class="dd-item ">
        <a href="/docs/writing_tests/interact/">
        Interact
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/writing_tests/screenshot/" title="Screenshot" class="dd-item ">
        <a href="/docs/writing_tests/screenshot/">
        Screenshot
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/writing_tests/webtests/" title="Webtests" class="dd-item ">
        <a href="/docs/writing_tests/webtests/">
        Webtests
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs/enterprise_features/" title="Enterprise Features" class="dd-item
        parent
        
        
        ">
      <a href="/docs/enterprise_features/">
          <i class='fas fa-chevron-right'></i>  Enterprise Features
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/docs/enterprise_features/icinga/" title="Icinga2 Forwarder" class="dd-item ">
        <a href="/docs/enterprise_features/icinga/">
        Icinga2 Forwarder
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/enterprise_features/check/" title="checkmk Fowarder" class="dd-item active">
        <a href="/docs/enterprise_features/check/">
        checkmk Fowarder
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/enterprise_features/omd/" title="OMD Forwarder" class="dd-item ">
        <a href="/docs/enterprise_features/omd/">
        OMD Forwarder
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/enterprise_features/e2e/" title="Container" class="dd-item ">
        <a href="/docs/enterprise_features/e2e/">
        Container
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/enterprise_features/s2i/" title="S2I Image" class="dd-item ">
        <a href="/docs/enterprise_features/s2i/">
        S2I Image
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs/cli/" title="CLI" class="dd-item
        
        
        
        ">
      <a href="/docs/cli/">
          <i class='fas fa-chevron-right'></i>  CLI
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs/cookbook/" title="Cookbook" class="dd-item
        
        
        
        ">
      <a href="/docs/cookbook/">
          <i class='fas fa-chevron-right'></i>  Cookbook
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/docs/cookbook/container/" title="Run Container" class="dd-item ">
        <a href="/docs/cookbook/container/">
        Run Container
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/cookbook/proxy/" title="Container and Proxies" class="dd-item ">
        <a href="/docs/cookbook/proxy/">
        Container and Proxies
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/cookbook/frames/" title="Frames" class="dd-item ">
        <a href="/docs/cookbook/frames/">
        Frames
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      


      
      <div id="apiHead" class="padding">API Docs</div>
      <ul id="apiMenu">
        <li><a href="/apidoc/sakuli-legacy" target="_blank" >@sakuli/legacy</a></li>
      </ul>

      

      <hr/>

      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt" ></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/docs/'></a> > <a href='/docs/enterprise_features/'>Enterprise Features</a> > checkmk Fowarder
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
        <nav id="TableOfContents">
<ul>
<li><a href="#checkmk-forwarder">checkmk Forwarder</a>
<ul>
<li><a href="#sakuli-client-configuration">Sakuli Client Configuration</a>
<ul>
<li><a href="#spool-folder">Spool folder</a></li>
<li><a href="#forwarder-configuration">Forwarder configuration</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            
          

        





<h1 id="checkmk-forwarder">checkmk Forwarder</h1>

<p>Add the forwarder using the <a href="/docs/enterprise/#assisted-setup">assistant</a> or configure it manually:</p>

<p>Add the forwarder to your project with:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm i @sakuli/forwarder-checkmk</code></pre></div>

<p>To register the forwarder into your project you have to edit the <code>package.json</code> file and add the preset to the Sakuli configuration key:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
    <span style="color:#f92672">&#34;sakuli&#34;</span>: {
        <span style="color:#f92672">&#34;presetProvider&#34;</span>: [
            <span style="color:#e6db74">&#34;@sakuli/legacy&#34;</span>,
            <span style="color:#e6db74">&#34;@sakuli/forwarder-checkmk&#34;</span>
        ]
    }
}</code></pre></div>

<p>Installation of any enterprise feature requires a proper setup of your license information. You can find further information in the <a href="/docs/enterprise#using-licences-information">enterprise section</a>.</p>

<h2 id="sakuli-client-configuration">Sakuli Client Configuration</h2>

<p>It is assumed that the client is already monitored by checkmk and that an agent is installed and running on it.</p>

<h3 id="spool-folder">Spool folder</h3>

<p>Create a new folder <code>spool</code> in the installation path of the checkmk agent. This is the folder where the results will be written and stored into. Don&rsquo;t forget to grant writing permissions for the folder to the user running Sakuli checks.</p>

<h3 id="forwarder-configuration">Forwarder configuration</h3>

<p>Now you have to set up the properties for the checkmk receiver. In order to do this, edit the <code>sakuli.properties</code> in the folder containing the testsuites:</p>

<table>
<thead>
<tr>
<th>Property</th>
<th>Default</th>
<th>Effect</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>sakuli.forwarder.check_mk.enabled</code></td>
<td><code>false</code></td>
<td>Enables writing to the spool file</td>
</tr>

<tr>
<td><code>sakuli.forwarder.check_mk.spooldir</code></td>
<td><code>/var/lib/check_mk_agent/spool</code> (Linux)<br/><code>&lt;CMK_installation_path&gt;\\spool</code> (Windows)</td>
<td>Path to the spool folder as defined above. On Windows, the backslashes have to be escaped with &lsquo;\&lsquo;. Check_MK is expecting the result files from Sakuli in here</td>
</tr>

<tr>
<td><code>sakuli.forwarder.check_mk.freshness</code></td>
<td><code>600</code></td>
<td>Defines the maximal age in seconds for which the result is still valid. If the last modification of the result file is older than this property, the result file will be ignored. The Check_MK service will turn into UNKNOWN</td>
</tr>

<tr>
<td><code>sakuli.forwarder.check_mk.spoolfile_prefix</code></td>
<td><code>sakuli_suite_</code></td>
<td>Defines the result file prefix. It can be used to change the default naming convention for the Check_MK output files</td>
</tr>

<tr>
<td><code>sakuli.forwarder.check_mk.service_description</code></td>
<td><code>${testsuite.id}</code></td>
<td>Defines the service description which is used within the check result</td>
</tr>

<tr>
<td><code>sakuli.forwarder.check_mk.piggyback_hostname</code></td>
<td><code>local</code></td>
<td>Defines Hostname for check results, configurable for piggyback results</td>
</tr>

<tr>
<td><code>sakuli.forwarder.check_mk.output.details</code></td>
<td><code>true</code></td>
<td>Dis- / Enables detailed HTML output</td>
</tr>

<tr>
<td><code>sakuli.forwarder.check_mk.section_name</code></td>
<td><code>local</code></td>
<td>Name of the reported section (&lt;&lt;&lt;YOUR_SECTION_NAME&gt;&gt;&gt;)</td>
</tr>
</tbody>
</table>

<p>An example configuration could look like this:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-properties" data-lang="properties">sakuli.forwarder.check_mk.enabled=true
sakuli.forwarder.check_mk.spooldir=/var/lib/check_mk_agent/spool
sakuli.forwarder.check_mk.freshness=600
sakuli.forwarder.check_mk.spoolfile_prefix=sakuli_suite_
sakuli.forwarder.check_mk.service_description=My_Custom_Service
sakuli.forwarder.check_mk.piggyback_hostname=MyHost</code></pre></div>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/docs/enterprise_features/icinga/" title="Icinga2 Forwarder"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/docs/enterprise_features/omd/" title="OMD Forwarder" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/docs/js/clipboard.min.js"></script>
    <script src="/docs/js/perfect-scrollbar.min.js"></script>
    <script src="/docs/js/perfect-scrollbar.jquery.min.js"></script>
    <script src="/docs/js/jquery.sticky.js"></script>
    <script src="/docs/js/featherlight.min.js"></script>
    <script src="/docs/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/docs/js/modernizr.custom-3.6.0.js"></script>
    <script src="/docs/js/learn.js"></script>
    <script src="/docs/js/hugo-learn.js"></script>

    <link href="/docs/mermaid/mermaid.css" rel="stylesheet" />
    <script src="/docs/mermaid/mermaid.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

